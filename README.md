# 智能家庭租户管理系统

一套**全自动**的家庭租户管理系统，租户扫码就能完成所有操作，商户管理员只需偶尔查看监控。

## 🎯 核心理念

**租户扫码就能办，商户基本不用管**

- ✅ 自助入住：扫码自动分配房间
- ✅ 自助交费：查看账单一键支付
- ✅ 自助退房：自动结算押金
- ✅ 商超购物：自动抵扣优惠券
- ✅ 自动发券：交费满额自动发商超券

## 🏠 系统架构

- **4层楼结构**：1层商超，2-4层住宅（每层10个房间，共30间）
- **全自助流程**：租户扫码即可完成所有操作
- **智能返现**：电费满额自动发放商超购物券

## 📱 租户操作流程

### 1. 扫码入住 `/checkin`
1. 扫码访问入住页面
2. 输入手机号
3. 填写姓名、押金金额
4. 系统自动分配第一个可用房间
5. 完成入住

### 2. 扫码交费 `/pay`
1. 扫码访问支付页面
2. 输入手机号查看未付账单
3. 选择要支付的账单（房租、电费）
4. 一键支付
5. 自动发放返现券

### 3. 扫码退房 `/checkout-room`
1. 扫码访问退房页面
2. 输入手机号
3. 查看未付账单状态
4. 确认退房
5. 押金自动结算退回

### 4. 商超购物 `/checkout`
1. 扫码或输入手机号
2. 添加商品
3. 系统自动匹配最优优惠券
4. 租户扫码支付
5. 优惠券自动核销

### 5. 查看优惠券 `/my-coupons`
1. 输入手机号
2. 查看所有可用优惠券
3. 点击"去使用"跳转商超

## 🎫 返现券规则

| 电费金额 | 返现券 | 使用条件 |
|---------|--------|---------|
| ≥ 500元 | 70元券 | 满140可用 |
| ≥ 300元 | 30元券 | 满60可用 |
| ≥ 100元 | 5元券 | 满10可用 |

**使用场景**：商超购物时自动抵扣

## 📊 商户后台 `/admin`

只读监控面板，实时查看：
- 在住租户数量
- 空房数量
- 商超订单数
- 商超营收
- 最近订单列表
- 系统运行状态

**无需任何操作，系统全自动运行**

## 🚀 快速开始

1. 初始化房间数据（如果还没初始化）：
   ```bash
   curl -X PUT http://localhost:5000/api/rooms
   ```

2. 访问首页：http://localhost:5000

3. 租户扫码即可开始操作

## 🌐 页面导航

- `/` - 首页（服务入口）
- `/checkin` - 自助入住
- `/pay` - 自助交费
- `/checkout-room` - 自助退房
- `/checkout` - 商超购物
- `/my-coupons` - 我的优惠券
- `/admin` - 商户监控后台

## 💡 使用提示

### 对租户
- 所有操作只需扫码 + 手机号
- 入住时系统自动分配房间
- 交费时系统自动发券
- 退房时押金自动退回

### 对商户
- 系统全自动运行
- 只需偶尔查看 `/admin` 监控面板
- 如遇异常，检查日志或联系技术支持

## 📈 运营数据

商户后台实时显示：
- 入住率
- 商超营收
- 订单总数
- 自动化模块运行状态

## 🔒 技术保障

- 所有数据存储在 PostgreSQL
- 文件存储在对象存储（合同等）
- 前后端分离，安全可靠
- 实时监控，自动告警

## 🎉 系统优势

1. **完全自助**：租户扫码就能完成所有操作
2. **自动化**：房间分配、押金结算、发券全部自动
3. **零维护**：商户管理员几乎无需操作
4. **数据透明**：商户后台实时查看所有数据
5. **激励消费**：返现券引导租户在商超消费

---

**扫码就能办，商户基本不用管！** 🎯
